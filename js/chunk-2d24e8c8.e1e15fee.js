(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d24e8c8"],{"159b":function(t,e,a){var s=a("da84"),i=a("fdbc"),n=a("17c2"),o=a("9112");for(var l in i){var c=s[l],r=c&&c.prototype;if(r&&r.forEach!==n)try{o(r,"forEach",n)}catch(u){r.forEach=n}}},"17c2":function(t,e,a){"use strict";var s=a("b727").forEach,i=a("a640"),n=a("ae40"),o=i("forEach"),l=n("forEach");t.exports=o&&l?[].forEach:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}},4160:function(t,e,a){"use strict";var s=a("23e7"),i=a("17c2");s({target:"Array",proto:!0,forced:[].forEach!=i},{forEach:i})},"71e3":function(t,e,a){},a640:function(t,e,a){"use strict";var s=a("d039");t.exports=function(t,e){var a=[][t];return!!a&&s((function(){a.call(null,e||function(){throw 1},1)}))}},ab3e:function(t,e,a){"use strict";var s=a("71e3"),i=a.n(s);i.a},f125:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"notes"},[a("el-container",[a("el-aside",{staticClass:"aside animate__animated animate__slideInLeft",attrs:{width:"300px"}},[a("header",{staticClass:"header"},[a("el-select",{attrs:{placeholder:""},model:{value:t.selectValue,callback:function(e){t.selectValue=e},expression:"selectValue"}},t._l(t.options,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1),a("el-button",{attrs:{size:"mini"},on:{click:function(e){return e.stopPropagation(),t.addNote(e)}}},[t._v("添加笔记")])],1),a("el-row",{staticClass:"list_head"},[a("el-col",{attrs:{span:12}},[t._v("创建时间")]),a("el-col",{attrs:{span:12}},[t._v("标题")])],1),t.showList?a("section",{staticClass:"lists_main"},t._l(t.userData[t.selectValue].lists,(function(e,s){return a("div",{key:s},[e.show?a("el-row",{class:["lists_item",{checked:t.selectedNote===s}],nativeOn:{click:function(a){return a.stopPropagation(),t.selectedNoteData(e,s)}}},[a("el-col",{attrs:{span:12}},[t._v(t._s(t._f("changeDate")(e.createdTime)))]),a("el-col",{attrs:{span:12,title:e.title.length>8&&e.title}},[t._v(" "+t._s(e.title.length>8?e.title.slice(0,8)+"...":e.title)+" ")])],1):t._e()],1)})),0):t._e()],1),t.noteData?a("el-main",{staticClass:"note_main"},[a("header",{staticClass:"noteMain_header"},[a("el-row",[a("el-col",{attrs:{span:12}},[t._v(" 创建时间："+t._s(new Date(t.noteData.createdTime).toLocaleString().replace(/\//g,"-"))+" "+t._s(t.saveStatus)+" ")]),a("el-col",{attrs:{span:1,offset:11}},[a("el-popconfirm",{attrs:{confirmButtonText:"确定",cancelButtonText:"取消",icon:"el-icon-info",iconColor:"red",title:"确定删除该笔记吗？"},on:{onConfirm:t.deleteNote}},[a("i",{staticClass:"el-icon-delete icon",attrs:{slot:"reference"},slot:"reference"})])],1)],1)],1),a("section",{staticClass:"note_title"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.noteTitle,expression:"noteTitle"}],staticClass:"input",attrs:{placeholder:"请输入文章标题"},domProps:{value:t.noteTitle},on:{input:[function(e){e.target.composing||(t.noteTitle=e.target.value)},function(e){return t.changeNoteData("title",t.noteTitle)}]}})]),a("section",{staticClass:"note_content"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.noteCotent,expression:"noteCotent"}],staticClass:"textarea",attrs:{placeholder:"请输入文章内容"},domProps:{value:t.noteCotent},on:{input:[function(e){e.target.composing||(t.noteCotent=e.target.value)},function(e){return t.changeNoteData("content",t.noteCotent)}]}})])]):t._e()],1)],1)},i=[],n=(a("99af"),a("4160"),a("fb6a"),a("159b"),a("2909")),o={props:{userData:{type:Array,required:!0},recycleBinData:{type:Array,required:!0}},data:function(){return{options:[],selectValue:0,showList:!1,noteTitle:"",noteCotent:"",noteData:null,selectedNote:0,saveStatus:"已保存",timer:null}},methods:{initOptions:function(){var t=this;this.$route.params.selectValue?(this.selectValue=this.$route.params.selectValue,this.userData.forEach((function(e,a){e.checked=t.$route.params.selectValue===a}))):this.selectValue=0;var e=this.userData;this.$emit("updateUserData",e),this.userData.forEach((function(e,a){var s={value:a,label:e.noteBookName};t.options=[].concat(Object(n["a"])(t.options),[s]),!0===e.checked&&(t.selectValue=a)}))},initNoteData:function(){var t=this.userData[this.selectValue].lists;t.length>0&&(this.noteData=t[this.selectedNote])},addNote:function(){var t={createdTime:(new Date).getTime(),title:"无标题",content:"",show:!0};this.userData[this.selectValue].lists=[t].concat(Object(n["a"])(this.userData[this.selectValue].lists));var e=this.userData;this.$emit("updateUserData",e),this.noteData=this.userData[this.selectValue].lists[0]},selectedNoteData:function(t,e){this.noteData=t,this.selectedNote=e},changeNoteData:function(t,e){var a=this;if(this.saveStatus="保存中","title"===t&&e.length>20)return this.$message.warning("文章标题不能超过20个字数"),this.noteTitle=e.slice(0,20),!1;"title"===t&&0===e.length&&(e="无标题"),clearTimeout(this.timer),this.timer=setTimeout((function(){a.userData[a.selectValue].lists[a.selectedNote][t]=e;var s=a.userData;a.$emit("updateUserData",s),a.saveStatus="已保存"}),300)},deleteNote:function(){var t=this;this.userData[this.selectValue].lists[this.selectedNote].show=!1;var e=this.userData;this.$emit("updateUserData",e);var a=this.userData[this.selectValue].noteBookName,s=this.userData[this.selectValue].lists[this.selectedNote],i=(new Date).getTime(),o={deleteTime:i,category:a,noteData:s},l=[o].concat(Object(n["a"])(this.recycleBinData));this.$emit("updateRecycleBinData",l);var c=0;if(this.userData[this.selectValue].lists.forEach((function(t){!0===t.show&&c++})),c>0){var r=!0;this.userData[this.selectValue].lists.forEach((function(e,a){!0===e.show&&r&&(r=!1,t.selectedNoteData(t.userData[t.selectValue].lists[a],a))}))}else this.selectedNoteData(null,0);this.$message.success("笔记删除成功")}},watch:{noteData:function(){this.noteTitle=this.noteData?this.noteData.title:"",this.noteCotent=this.noteData?this.noteData.content:""},selectValue:function(){var t=this,e=this.userData[this.selectValue].lists;0===e.length&&(this.noteData=null),this.userData.forEach((function(e,a){e.checked=t.selectValue===a}));var a=this.userData;this.$emit("updateUserData",a)}},mounted:function(){var t=this;this.showList=!0,this.$nextTick((function(){t.initOptions(),t.initNoteData()}))},beforeRouteEnter:function(t,e,a){a((function(t){if(t.userData.length<=0)return t.$message.info("亲，你还没有任何笔记本，请先创建笔记本"),t.$router.push("/notebooks"),!1}))},filters:{changeDate:function(t){var e=(new Date).getTime(),a=e-t,s=Math.floor(a/31536e6),i=Math.floor(a/2592e6),n=Math.floor(a/864e5),o=Math.floor(a/36e5),l=Math.floor(a/6e4),c=Math.floor(a/1e3),r=[s,i,n,o,l,c,""],u=["年前","月前","天前","小时前","分钟前","秒前","刚刚"],h=6,f=!0;return r.forEach((function(t,e){t&&f&&(h=e,f=!1)})),"".concat(r[h]).concat(u[h])}}},l=o,c=(a("ab3e"),a("2877")),r=Object(c["a"])(l,s,i,!1,null,"74b2331e",null);e["default"]=r.exports}}]);
//# sourceMappingURL=chunk-2d24e8c8.e1e15fee.js.map